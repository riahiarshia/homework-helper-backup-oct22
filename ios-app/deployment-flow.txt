╔══════════════════════════════════════════════════════════════════════╗
║                 SINGLE CODEBASE DEPLOYMENT FLOW                       ║
╚══════════════════════════════════════════════════════════════════════╝

YOUR LAPTOP (One Folder)
┌────────────────────────────────────────────────────────────────────┐
│  /Users/ar616n/Documents/ios-app/ios-app                           │
│                                                                     │
│  Git Repository (branches):                                        │
│    ├── main                    ← Production-ready code             │
│    ├── develop                 ← Integration branch                │
│    └── feature/new-feature     ← Your current work                 │
│                                                                     │
│  Files (same on all branches):                                     │
│    ├── backend/server.js       ← SAME CODE                         │
│    ├── backend/config.js       ← SAME CODE (reads env vars)        │
│    ├── backend/.env.development ← NOT in git (local only)          │
│    └── HomeworkHelper/Config.swift ← SAME CODE                     │
└────────────────────────────────────────────────────────────────────┘
         │                  │                    │
         │ Test Locally     │ git push          │ git push
         │ with dev config  │ Deploy            │ Deploy
         ↓                  ↓                    ↓
┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐
│   LOCAL DEV      │  │   STAGING        │  │   PRODUCTION     │
│                  │  │   (Azure)        │  │   (Azure)        │
│  localhost:3000  │  │  staging.azure.  │  │  prod.azure.com  │
│                  │  │  websites.net    │  │                  │
│  Config:         │  │  Config:         │  │  Config:         │
│  .env.dev file   │  │  Azure Env Vars  │  │  Key Vault       │
│  Dev OpenAI key  │  │  Dev OpenAI key  │  │  Prod OpenAI key │
└──────────────────┘  └──────────────────┘  └──────────────────┘

═══════════════════════════════════════════════════════════════════════

WHAT CHANGES BETWEEN ENVIRONMENTS?

┌─────────────────────────────────────────────────────────────────────┐
│ CODE:            SAME   SAME   SAME                                 │
│ Configuration:   ↓      ↓      ↓                                    │
├─────────────────────────────────────────────────────────────────────┤
│                  Dev    Staging Production                          │
│ NODE_ENV         dev    staging production                          │
│ Database         Local  Azure   Azure                               │
│ OpenAI Key       File   Azure   Key Vault                           │
│ Stripe           Test   Test    Live                                │
└─────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════

EXAMPLE: Adding a New Feature

Day 1: Start Feature
  ┌─────────────────────────────────────────────────────────┐
  │ git checkout -b feature/teacher-mode                    │
  │ # Edit backend/routes/teacher.js                        │
  │ npm run dev:watch  ← Test locally                       │
  │ git commit -m "Add teacher mode"                        │
  └─────────────────────────────────────────────────────────┘
  Code: On your laptop, feature branch
  Status: Not deployed anywhere

Day 2: Merge to Develop
  ┌─────────────────────────────────────────────────────────┐
  │ git checkout develop                                    │
  │ git merge feature/teacher-mode                          │
  │ git push origin develop                                 │
  └─────────────────────────────────────────────────────────┘
  Code: In develop branch
  Status: Still not deployed

Day 3: Deploy to Staging
  ┌─────────────────────────────────────────────────────────┐
  │ ./deploy-staging.sh                                     │
  │ # Same code now running on staging.azurewebsites.net    │
  │ # Test it thoroughly                                    │
  └─────────────────────────────────────────────────────────┘
  Code: SAME code, now on Azure staging
  Config: Uses Azure staging settings

Day 4: Release to Production
  ┌─────────────────────────────────────────────────────────┐
  │ git checkout main                                       │
  │ git merge develop                                       │
  │ git tag v1.2.0                                          │
  │ ./deploy-production.sh                                  │
  └─────────────────────────────────────────────────────────┘
  Code: SAME code, now on Azure production
  Config: Uses Azure production settings (Key Vault)

═══════════════════════════════════════════════════════════════════════

KEY INSIGHT:
You NEVER have separate "dev code" and "prod code"
You ALWAYS have ONE codebase with different CONFIGURATIONS

Think of it like a single app that reads a settings file:
  - Local: Reads .env.development
  - Staging: Reads Azure App Settings  
  - Production: Reads Azure Key Vault

Same app, different settings! 🎯

